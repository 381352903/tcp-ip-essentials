## 6.7 Exercises on TCP connection control

For this experiment, we will use a topology with two workstations (named "romeo" and "juliet"), with IP addresses configured as follows:

* romeo: 10.10.1.1
* juliet: 10.10.1.2

each with a netmask of 255.255.255.0. 

To set up this topology in the GENI Portal, create a slice, click on "Add Resources", and load the RSpec from the following URL: **TBD**

Then bind to an InstaGENI site and reserve your resources. Wait for them to become available for login ("turn green" on your canvas) and then SSH into each, using the details given in the GENI Portal.

In this exercise, we will generate traffic between hosts using the `telnet` application. This application is not installed by default, so we will install it on the "juliet" node as follows. First, run

```
sudo apt-get update  
sudo apt-get install xinetd telnetd  
```

(choose "Y" and hit Enter if prompted.) Then run

```
sudo nano /etc/xinetd.d/telnet
```

to open the telnet config file. Paste the following into this file:

```
service telnet  
{
  disable = no  
  flags = REUSE    
  socket_type = stream   
  wait = no  
  user = root  
  server = /usr/sbin/in.telnetd
  log_on_failure += USERID   
  bind = 10.10.66.101
}
```

(Refer to [this link](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/3/html/Reference_Guide/s1-tcpwrappers-xinetd-config.html) for an explanation of this config file.)

To save the file, use Ctrl+O to write out to file (and hit Enter to confirm the output filename). Then use Ctrl+X to exit nano. Finally, run

```
sudo service xinetd restart  
```

to restart the xinetd service, now with telnet enabled.

You will also have to set up a password for telnet login. On "juliet", run

```
sudo passwd
```

and enter a password when prompted.

Before you start the exercise, use `ifconfig -a` to capture the network interface configuration of each host in this topology. Draw a diagram of the topology, and label each network interface with its name, IP address, and MAC address.

### Exercise 1

While 

```
tcpdump -S -w tcp-connection-control.pcap
```

is running on each host, on "romeo", execute:

```
telnet 10.10.1.2 time
```

**Lab report**: Explain TCP connection establishment and temrination using the `tcpdump` output. 

**Lab report** What were the announced MSS values for the two hosts?
